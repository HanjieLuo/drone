ARM GAS  C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"sensors.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.SensorsInit.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 496E6974 		.ascii	"Init Sensors...\015\000"
  20      2053656E 
  20      736F7273 
  20      2E2E2E0D 
  20      00
  21 0011 000000   		.align	2
  22              	.LC1:
  23 0014 4D505536 		.ascii	"MPU6050Init:  %u\015\012\000"
  23      30353049 
  23      6E69743A 
  23      20202575 
  23      0D0A00
  24 0027 00       		.align	2
  25              	.LC2:
  26 0028 484D4335 		.ascii	"HMC5883LInit: %u\015\012\000"
  26      3838334C 
  26      496E6974 
  26      3A202575 
  26      0D0A00
  27 003b 00       		.align	2
  28              	.LC3:
  29 003c 4D533536 		.ascii	"MS5611Init:   %u\015\012\000"
  29      3131496E 
  29      69743A20 
  29      20202575 
  29      0D0A00
  30 004f 00       		.align	2
  31              	.LC4:
  32 0050 53756363 		.ascii	"Success to Init Sensors!\015\012\015\000"
  32      65737320 
  32      746F2049 
  32      6E697420 
  32      53656E73 
  33              		.align	2
  34              	.LC5:
  35 006c 4661696C 		.ascii	"Fail to Init Sensors!\015\012\015\000"
  35      20746F20 
  35      496E6974 
ARM GAS  C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s 			page 2


  35      2053656E 
  35      736F7273 
  36              		.section	.text.SensorsInit,"ax",%progbits
  37              		.align	1
  38              		.global	SensorsInit
  39              		.arch armv7e-m
  40              		.syntax unified
  41              		.thumb
  42              		.thumb_func
  43              		.fpu fpv4-sp-d16
  45              	SensorsInit:
  46              	.LFB138:
  47              		.file 1 "Modules/src/sensors.c"
   1:Modules/src/sensors.c **** #include "sensors.h"
   2:Modules/src/sensors.c **** 
   3:Modules/src/sensors.c **** xQueueHandle acc_raw_queue;
   4:Modules/src/sensors.c **** STATIC_MEM_QUEUE_ALLOC(acc_raw_queue, 1, sizeof(float) * 3);
   5:Modules/src/sensors.c **** xQueueHandle gyro_raw_queue;
   6:Modules/src/sensors.c **** STATIC_MEM_QUEUE_ALLOC(gyro_raw_queue, 1, sizeof(float) * 3);
   7:Modules/src/sensors.c **** xQueueHandle mag_raw_queue;
   8:Modules/src/sensors.c **** STATIC_MEM_QUEUE_ALLOC(mag_raw_queue, 1, sizeof(float) * 3);
   9:Modules/src/sensors.c **** 
  10:Modules/src/sensors.c **** static TaskHandle_t sensors_task_handle;
  11:Modules/src/sensors.c **** STATIC_MEM_TASK_ALLOC(sensors_task, SENSORS_TASK_STACKSIZE);
  12:Modules/src/sensors.c **** const TickType_t sensors_task_wait = pdMS_TO_TICKS(50);
  13:Modules/src/sensors.c **** 
  14:Modules/src/sensors.c **** float tmpx, tmpy, tmpz;
  15:Modules/src/sensors.c **** 
  16:Modules/src/sensors.c **** // void MPU6050Task(void *param);
  17:Modules/src/sensors.c **** // void MS5611Task(void *param);
  18:Modules/src/sensors.c **** // void HMC5883LTask(void *param);
  19:Modules/src/sensors.c **** // static TaskHandle_t mpu6050_task_handle;
  20:Modules/src/sensors.c **** // STATIC_MEM_TASK_ALLOC(mpu6050_task, configMINIMAL_STACK_SIZE * 5);
  21:Modules/src/sensors.c **** // static TaskHandle_t ms5611_task_handle;
  22:Modules/src/sensors.c **** // STATIC_MEM_TASK_ALLOC(ms5611_task, configMINIMAL_STACK_SIZE *5);
  23:Modules/src/sensors.c **** // static TaskHandle_t hmc5883l_task_handle;
  24:Modules/src/sensors.c **** // STATIC_MEM_TASK_ALLOC(hmc5883l_task, configMINIMAL_STACK_SIZE *5);
  25:Modules/src/sensors.c **** 
  26:Modules/src/sensors.c **** bool SensorsInit(void) {
  48              		.loc 1 26 24 view -0
  49              		.cfi_startproc
  50              		@ args = 0, pretend = 0, frame = 0
  51              		@ frame_needed = 0, uses_anonymous_args = 0
  52 0000 70B5     		push	{r4, r5, r6, lr}
  53              	.LCFI0:
  54              		.cfi_def_cfa_offset 16
  55              		.cfi_offset 4, -16
  56              		.cfi_offset 5, -12
  57              		.cfi_offset 6, -8
  58              		.cfi_offset 14, -4
  27:Modules/src/sensors.c ****     printf("Init Sensors...\r\n");
  59              		.loc 1 27 5 view .LVU1
  60 0002 1348     		ldr	r0, .L5
  61 0004 FFF7FEFF 		bl	puts
  62              	.LVL0:
  28:Modules/src/sensors.c **** 
  29:Modules/src/sensors.c ****     bool IS_MPU6050_OK = MPU6050Init();
ARM GAS  C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s 			page 3


  63              		.loc 1 29 5 view .LVU2
  64              		.loc 1 29 26 is_stmt 0 view .LVU3
  65 0008 FFF7FEFF 		bl	MPU6050Init
  66              	.LVL1:
  67 000c 0546     		mov	r5, r0
  68              	.LVL2:
  30:Modules/src/sensors.c ****     printf("MPU6050Init:  %u\r\n", IS_MPU6050_OK);
  69              		.loc 1 30 5 is_stmt 1 view .LVU4
  70 000e 0146     		mov	r1, r0
  71 0010 1048     		ldr	r0, .L5+4
  72              	.LVL3:
  73              		.loc 1 30 5 is_stmt 0 view .LVU5
  74 0012 FFF7FEFF 		bl	printf
  75              	.LVL4:
  31:Modules/src/sensors.c **** 
  32:Modules/src/sensors.c ****     bool IS_HMC5883_OK = HMC5883LInit();
  76              		.loc 1 32 5 is_stmt 1 view .LVU6
  77              		.loc 1 32 26 is_stmt 0 view .LVU7
  78 0016 FFF7FEFF 		bl	HMC5883LInit
  79              	.LVL5:
  80 001a 0646     		mov	r6, r0
  81              	.LVL6:
  33:Modules/src/sensors.c ****     printf("HMC5883LInit: %u\r\n", IS_HMC5883_OK);
  82              		.loc 1 33 5 is_stmt 1 view .LVU8
  83 001c 0146     		mov	r1, r0
  84 001e 0E48     		ldr	r0, .L5+8
  85              	.LVL7:
  86              		.loc 1 33 5 is_stmt 0 view .LVU9
  87 0020 FFF7FEFF 		bl	printf
  88              	.LVL8:
  34:Modules/src/sensors.c **** 
  35:Modules/src/sensors.c ****     bool IS_MS5611_OK = MS5611Init();
  89              		.loc 1 35 5 is_stmt 1 view .LVU10
  90              		.loc 1 35 25 is_stmt 0 view .LVU11
  91 0024 FFF7FEFF 		bl	MS5611Init
  92              	.LVL9:
  93 0028 0446     		mov	r4, r0
  94              	.LVL10:
  36:Modules/src/sensors.c ****     printf("MS5611Init:   %u\r\n", IS_MS5611_OK);
  95              		.loc 1 36 5 is_stmt 1 view .LVU12
  96 002a 0146     		mov	r1, r0
  97 002c 0B48     		ldr	r0, .L5+12
  98              	.LVL11:
  99              		.loc 1 36 5 is_stmt 0 view .LVU13
 100 002e FFF7FEFF 		bl	printf
 101              	.LVL12:
  37:Modules/src/sensors.c **** 
  38:Modules/src/sensors.c ****     // acc_raw_queue = STATIC_MEM_QUEUE_CREATE(acc_raw_queue);
  39:Modules/src/sensors.c ****     // gyro_raw_queue = STATIC_MEM_QUEUE_CREATE(gyro_raw_queue);
  40:Modules/src/sensors.c ****     // mag_raw_queue = STATIC_MEM_QUEUE_CREATE(mag_raw_queue);
  41:Modules/src/sensors.c **** 
  42:Modules/src/sensors.c ****     // sensors_task_handle = STATIC_MEM_TASK_CREATE(sensors_task, SensorsTask, "SensorsTask", NULL,
  43:Modules/src/sensors.c ****     // mpu6050_task_handle = STATIC_MEM_TASK_CREATE(mpu6050_task, MPU6050Task, "MPU6050Task", NULL,
  44:Modules/src/sensors.c ****     // ms5611_task_handle = STATIC_MEM_TASK_CREATE(ms5611_task, MS5611Task, "MS5611Task", NULL, 1);
  45:Modules/src/sensors.c ****     // hmc5883l_task_handle = STATIC_MEM_TASK_CREATE(hmc5883l_task, HMC5883LTask, "HMC5883LTask", N
  46:Modules/src/sensors.c **** 
  47:Modules/src/sensors.c ****     bool IS_SENSORS_OK = IS_MPU6050_OK & IS_HMC5883_OK & IS_MS5611_OK;
ARM GAS  C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s 			page 4


 102              		.loc 1 47 5 is_stmt 1 view .LVU14
 103 0032 05EA0600 		and	r0, r5, r6
 104 0036 0440     		ands	r4, r4, r0
 105              	.LVL13:
  48:Modules/src/sensors.c ****     if (IS_SENSORS_OK) {
 106              		.loc 1 48 5 view .LVU15
 107              		.loc 1 48 8 is_stmt 0 view .LVU16
 108 0038 14F0FF04 		ands	r4, r4, #255
 109              	.LVL14:
 110              		.loc 1 48 8 view .LVU17
 111 003c 04D0     		beq	.L2
  49:Modules/src/sensors.c ****         printf("Success to Init Sensors!\r\n\r\n");
 112              		.loc 1 49 9 is_stmt 1 view .LVU18
 113 003e 0848     		ldr	r0, .L5+16
 114 0040 FFF7FEFF 		bl	puts
 115              	.LVL15:
 116              	.L3:
  50:Modules/src/sensors.c ****     } else {
  51:Modules/src/sensors.c ****         printf("Fail to Init Sensors!\r\n\r\n"); 
  52:Modules/src/sensors.c ****     }
  53:Modules/src/sensors.c **** 
  54:Modules/src/sensors.c ****     return IS_SENSORS_OK;
 117              		.loc 1 54 5 view .LVU19
  55:Modules/src/sensors.c **** }
 118              		.loc 1 55 1 is_stmt 0 view .LVU20
 119 0044 2046     		mov	r0, r4
 120 0046 70BD     		pop	{r4, r5, r6, pc}
 121              	.L2:
  51:Modules/src/sensors.c ****     }
 122              		.loc 1 51 9 is_stmt 1 view .LVU21
 123 0048 0648     		ldr	r0, .L5+20
 124 004a FFF7FEFF 		bl	puts
 125              	.LVL16:
 126 004e F9E7     		b	.L3
 127              	.L6:
 128              		.align	2
 129              	.L5:
 130 0050 00000000 		.word	.LC0
 131 0054 14000000 		.word	.LC1
 132 0058 28000000 		.word	.LC2
 133 005c 3C000000 		.word	.LC3
 134 0060 50000000 		.word	.LC4
 135 0064 6C000000 		.word	.LC5
 136              		.cfi_endproc
 137              	.LFE138:
 139              		.section	.text.SensorsTask,"ax",%progbits
 140              		.align	1
 141              		.global	SensorsTask
 142              		.syntax unified
 143              		.thumb
 144              		.thumb_func
 145              		.fpu fpv4-sp-d16
 147              	SensorsTask:
 148              	.LVL17:
 149              	.LFB139:
  56:Modules/src/sensors.c **** 
  57:Modules/src/sensors.c **** void SensorsTask(void *param) {
ARM GAS  C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s 			page 5


 150              		.loc 1 57 31 view -0
 151              		.cfi_startproc
 152              		@ Volatile: function does not return.
 153              		@ args = 0, pretend = 0, frame = 8
 154              		@ frame_needed = 0, uses_anonymous_args = 0
 155              		.loc 1 57 31 is_stmt 0 view .LVU23
 156 0000 00B5     		push	{lr}
 157              	.LCFI1:
 158              		.cfi_def_cfa_offset 4
 159              		.cfi_offset 14, -4
 160 0002 83B0     		sub	sp, sp, #12
 161              	.LCFI2:
 162              		.cfi_def_cfa_offset 16
  58:Modules/src/sensors.c ****     SystemWaitStart();
 163              		.loc 1 58 5 is_stmt 1 view .LVU24
 164 0004 FFF7FEFF 		bl	SystemWaitStart
 165              	.LVL18:
  59:Modules/src/sensors.c **** 
  60:Modules/src/sensors.c ****     // int16_t acc_raw[3], gyro_raw[3], mag_raw[3];
  61:Modules/src/sensors.c ****     // float acc[3], gyro[3], mag[3];
  62:Modules/src/sensors.c **** 
  63:Modules/src/sensors.c ****     portTickType last_wait_time = xTaskGetTickCount();
 166              		.loc 1 63 5 view .LVU25
 167              		.loc 1 63 35 is_stmt 0 view .LVU26
 168 0008 FFF7FEFF 		bl	xTaskGetTickCount
 169              	.LVL19:
 170              		.loc 1 63 18 view .LVU27
 171 000c 0190     		str	r0, [sp, #4]
 172              	.L8:
  64:Modules/src/sensors.c ****     for(;;) {
 173              		.loc 1 64 5 is_stmt 1 discriminator 1 view .LVU28
  65:Modules/src/sensors.c ****         // MPU6050ReadAccelRaw(acc_raw);
  66:Modules/src/sensors.c ****         // MPU6050ReadGyroRaw(gyro_raw);
  67:Modules/src/sensors.c ****         // HMC5883LReadMagRaw(mag_raw);
  68:Modules/src/sensors.c **** 
  69:Modules/src/sensors.c ****         // printf("%u,%d,%d,%d,%d,%d,%d\n", pdTICKS_TO_MS(xTaskGetTickCount()), acc_raw[0], acc_raw
  70:Modules/src/sensors.c ****         
  71:Modules/src/sensors.c ****         // IMUCalibration(acc_raw, gyro_raw, mag_raw, acc, gyro, mag);
  72:Modules/src/sensors.c **** 
  73:Modules/src/sensors.c ****         // xQueueOverwrite(acc_raw_queue, acc_raw);
  74:Modules/src/sensors.c ****         // xQueueOverwrite(gyro_raw_queue, gyro_raw);
  75:Modules/src/sensors.c ****         // xQueueOverwrite(mag_raw_queue, mag_raw);
  76:Modules/src/sensors.c **** 
  77:Modules/src/sensors.c ****         // printf("Accel: %d, %d, %d\r\n", acc_raw[0], acc_raw[1], acc_raw[2]);
  78:Modules/src/sensors.c ****         // printf("Gyro: %d, %d, %d\r\n", gyro_raw[0], gyro_raw[1], gyro_raw[2]);
  79:Modules/src/sensors.c ****         // printf("Mag: %d, %d, %d\r\n", mag_raw[0], mag_raw[1], mag_raw[2]);
  80:Modules/src/sensors.c **** 
  81:Modules/src/sensors.c ****         // printf("Accel: %f %f %f\r\n", acc[0], acc[1], acc[2]);
  82:Modules/src/sensors.c ****         // printf("Gyro : %f %f %f\r\n", gyro[0], gyro[1], gyro[2]);
  83:Modules/src/sensors.c ****         // printf("Mag  : %f %f %f\r\n\r\n", mag[0], mag[1], mag[2]);
  84:Modules/src/sensors.c **** 
  85:Modules/src/sensors.c ****         // printf("%f,%f,%f,%f,%f,%f,%f,%f,%f,%f\n", (float)pdTICKS_TO_MS(xTaskGetTickCount()), acc
  86:Modules/src/sensors.c **** 
  87:Modules/src/sensors.c ****         // printf("%f,%d,%d,%d,%d,%d,%d,%d,%d,%d\n", (float)pdTICKS_TO_MS(xTaskGetTickCount()), acc
  88:Modules/src/sensors.c **** 
  89:Modules/src/sensors.c ****         vTaskDelayUntil(&last_wait_time, sensors_task_wait);
 174              		.loc 1 89 9 discriminator 1 view .LVU29
ARM GAS  C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s 			page 6


 175 000e 3221     		movs	r1, #50
 176 0010 01A8     		add	r0, sp, #4
 177 0012 FFF7FEFF 		bl	vTaskDelayUntil
 178              	.LVL20:
  64:Modules/src/sensors.c ****     for(;;) {
 179              		.loc 1 64 10 discriminator 1 view .LVU30
 180 0016 FAE7     		b	.L8
 181              		.cfi_endproc
 182              	.LFE139:
 184              		.section	.text.IMUCalibration,"ax",%progbits
 185              		.align	1
 186              		.global	IMUCalibration
 187              		.syntax unified
 188              		.thumb
 189              		.thumb_func
 190              		.fpu fpv4-sp-d16
 192              	IMUCalibration:
 193              	.LVL21:
 194              	.LFB140:
  90:Modules/src/sensors.c ****     }
  91:Modules/src/sensors.c **** 
  92:Modules/src/sensors.c ****     // int16_t* acc_raw  = pvPortMalloc(sizeof(int16_t) * 3);
  93:Modules/src/sensors.c ****     // int16_t* gyr_raw = pvPortMalloc(sizeof(int16_t) * 3);
  94:Modules/src/sensors.c ****     // int16_t* mag_raw = pvPortMalloc(sizeof(int16_t) * 3);
  95:Modules/src/sensors.c **** }
  96:Modules/src/sensors.c **** 
  97:Modules/src/sensors.c **** void IMUCalibration(const int16_t *acc_raw, const int16_t *gyro_raw, const int16_t *mag_raw, float 
 195              		.loc 1 97 131 view -0
 196              		.cfi_startproc
 197              		@ args = 8, pretend = 0, frame = 0
 198              		@ frame_needed = 0, uses_anonymous_args = 0
 199              		@ link register save eliminated.
 200              		.loc 1 97 131 is_stmt 0 view .LVU32
 201 0000 F0B4     		push	{r4, r5, r6, r7}
 202              	.LCFI3:
 203              		.cfi_def_cfa_offset 16
 204              		.cfi_offset 4, -16
 205              		.cfi_offset 5, -12
 206              		.cfi_offset 6, -8
 207              		.cfi_offset 7, -4
 208 0002 049F     		ldr	r7, [sp, #16]
 209 0004 059E     		ldr	r6, [sp, #20]
  98:Modules/src/sensors.c ****     tmpz = Sa_z * (acc_raw[2] - Ba_z);
 210              		.loc 1 98 5 is_stmt 1 view .LVU33
 211              		.loc 1 98 27 is_stmt 0 view .LVU34
 212 0006 B0F90440 		ldrsh	r4, [r0, #4]
 213 000a 06EE904A 		vmov	s13, r4	@ int
 214              		.loc 1 98 31 view .LVU35
 215 000e F8EEE66A 		vcvt.f32.s32	s13, s13
 216 0012 DFED837A 		vldr.32	s15, .L12
 217 0016 76EEA76A 		vadd.f32	s13, s13, s15
 218              		.loc 1 98 17 view .LVU36
 219 001a DFED827A 		vldr.32	s15, .L12+4
 220 001e 66EEA76A 		vmul.f32	s13, s13, s15
 221              		.loc 1 98 10 view .LVU37
 222 0022 814C     		ldr	r4, .L12+8
 223 0024 C4ED006A 		vstr.32	s13, [r4]
ARM GAS  C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s 			page 7


  99:Modules/src/sensors.c ****     tmpy = Sa_y * (acc_raw[1] - Ba_y);
 224              		.loc 1 99 5 is_stmt 1 view .LVU38
 225              		.loc 1 99 27 is_stmt 0 view .LVU39
 226 0028 B0F90250 		ldrsh	r5, [r0, #2]
 227 002c 06EE105A 		vmov	s12, r5	@ int
 228              		.loc 1 99 31 view .LVU40
 229 0030 B8EEC66A 		vcvt.f32.s32	s12, s12
 230 0034 DFED7D7A 		vldr.32	s15, .L12+12
 231 0038 36EE276A 		vadd.f32	s12, s12, s15
 232              		.loc 1 99 17 view .LVU41
 233 003c DFED7C7A 		vldr.32	s15, .L12+16
 234 0040 26EE276A 		vmul.f32	s12, s12, s15
 235              		.loc 1 99 10 view .LVU42
 236 0044 7B4D     		ldr	r5, .L12+20
 237 0046 85ED006A 		vstr.32	s12, [r5]
 100:Modules/src/sensors.c ****     tmpx = Sa_x * (acc_raw[0] - Ba_x);
 238              		.loc 1 100 5 is_stmt 1 view .LVU43
 239              		.loc 1 100 27 is_stmt 0 view .LVU44
 240 004a B0F90000 		ldrsh	r0, [r0]
 241              	.LVL22:
 242              		.loc 1 100 27 view .LVU45
 243 004e 07EE100A 		vmov	s14, r0	@ int
 244              		.loc 1 100 31 view .LVU46
 245 0052 B8EEC77A 		vcvt.f32.s32	s14, s14
 246 0056 DFED787A 		vldr.32	s15, .L12+24
 247 005a 37EE277A 		vadd.f32	s14, s14, s15
 248              		.loc 1 100 17 view .LVU47
 249 005e DFED777A 		vldr.32	s15, .L12+28
 250 0062 67EE277A 		vmul.f32	s15, s14, s15
 251              		.loc 1 100 10 view .LVU48
 252 0066 7648     		ldr	r0, .L12+32
 253 0068 C0ED007A 		vstr.32	s15, [r0]
 101:Modules/src/sensors.c **** 
 102:Modules/src/sensors.c ****     acc[2] = tmpz;
 254              		.loc 1 102 5 is_stmt 1 view .LVU49
 255              		.loc 1 102 12 is_stmt 0 view .LVU50
 256 006c C3ED026A 		vstr.32	s13, [r3, #8]
 103:Modules/src/sensors.c ****     acc[1] = tmpy + Ta12 * tmpz;
 257              		.loc 1 103 5 is_stmt 1 view .LVU51
 258              		.loc 1 103 26 is_stmt 0 view .LVU52
 259 0070 9FED747A 		vldr.32	s14, .L12+36
 260 0074 26EE877A 		vmul.f32	s14, s13, s14
 261              		.loc 1 103 19 view .LVU53
 262 0078 36EE077A 		vadd.f32	s14, s12, s14
 263              		.loc 1 103 12 view .LVU54
 264 007c 83ED017A 		vstr.32	s14, [r3, #4]
 104:Modules/src/sensors.c ****     acc[0] = tmpx + Ta01 * tmpy + Ta02 * tmpz;
 265              		.loc 1 104 5 is_stmt 1 view .LVU55
 266              		.loc 1 104 26 is_stmt 0 view .LVU56
 267 0080 9FED717A 		vldr.32	s14, .L12+40
 268 0084 26EE076A 		vmul.f32	s12, s12, s14
 269              		.loc 1 104 19 view .LVU57
 270 0088 77EE867A 		vadd.f32	s15, s15, s12
 271              		.loc 1 104 40 view .LVU58
 272 008c 9FED6F7A 		vldr.32	s14, .L12+44
 273 0090 66EE876A 		vmul.f32	s13, s13, s14
 274              		.loc 1 104 33 view .LVU59
ARM GAS  C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s 			page 8


 275 0094 77EEA67A 		vadd.f32	s15, s15, s13
 276              		.loc 1 104 12 view .LVU60
 277 0098 C3ED007A 		vstr.32	s15, [r3]
 105:Modules/src/sensors.c **** 
 106:Modules/src/sensors.c ****     tmpx = Sg_x * (gyro_raw[0] - Bg_x);
 278              		.loc 1 106 5 is_stmt 1 view .LVU61
 279              		.loc 1 106 28 is_stmt 0 view .LVU62
 280 009c B1F90030 		ldrsh	r3, [r1]
 281              	.LVL23:
 282              		.loc 1 106 28 view .LVU63
 283 00a0 07EE903A 		vmov	s15, r3	@ int
 284              		.loc 1 106 32 view .LVU64
 285 00a4 F8EEE77A 		vcvt.f32.s32	s15, s15
 286 00a8 9FED697A 		vldr.32	s14, .L12+48
 287 00ac 77EEC77A 		vsub.f32	s15, s15, s14
 288              		.loc 1 106 17 view .LVU65
 289 00b0 9FED687A 		vldr.32	s14, .L12+52
 290 00b4 67EE877A 		vmul.f32	s15, s15, s14
 291              		.loc 1 106 10 view .LVU66
 292 00b8 C0ED007A 		vstr.32	s15, [r0]
 107:Modules/src/sensors.c ****     tmpy = Sg_y * (gyro_raw[1] - Bg_y);
 293              		.loc 1 107 5 is_stmt 1 view .LVU67
 294              		.loc 1 107 28 is_stmt 0 view .LVU68
 295 00bc B1F90230 		ldrsh	r3, [r1, #2]
 296 00c0 06EE903A 		vmov	s13, r3	@ int
 297              		.loc 1 107 32 view .LVU69
 298 00c4 F8EEE66A 		vcvt.f32.s32	s13, s13
 299 00c8 9FED637A 		vldr.32	s14, .L12+56
 300 00cc 76EEC76A 		vsub.f32	s13, s13, s14
 301              		.loc 1 107 17 view .LVU70
 302 00d0 9FED627A 		vldr.32	s14, .L12+60
 303 00d4 66EE876A 		vmul.f32	s13, s13, s14
 304              		.loc 1 107 10 view .LVU71
 305 00d8 C5ED006A 		vstr.32	s13, [r5]
 108:Modules/src/sensors.c ****     tmpz = Sg_z * (gyro_raw[2] - Bg_z);
 306              		.loc 1 108 5 is_stmt 1 view .LVU72
 307              		.loc 1 108 28 is_stmt 0 view .LVU73
 308 00dc B1F90430 		ldrsh	r3, [r1, #4]
 309 00e0 07EE103A 		vmov	s14, r3	@ int
 310              		.loc 1 108 32 view .LVU74
 311 00e4 B8EEC77A 		vcvt.f32.s32	s14, s14
 312 00e8 9FED5D6A 		vldr.32	s12, .L12+64
 313 00ec 37EE067A 		vadd.f32	s14, s14, s12
 314              		.loc 1 108 17 view .LVU75
 315 00f0 9FED5C6A 		vldr.32	s12, .L12+68
 316 00f4 27EE067A 		vmul.f32	s14, s14, s12
 317              		.loc 1 108 10 view .LVU76
 318 00f8 84ED007A 		vstr.32	s14, [r4]
 109:Modules/src/sensors.c **** 
 110:Modules/src/sensors.c ****     gyro[0] = tmpx + Tg01 * tmpy + Tg02 * tmpz;
 319              		.loc 1 110 5 is_stmt 1 view .LVU77
 320              		.loc 1 110 27 is_stmt 0 view .LVU78
 321 00fc 9FED5A6A 		vldr.32	s12, .L12+72
 322 0100 66EE866A 		vmul.f32	s13, s13, s12
 323              		.loc 1 110 20 view .LVU79
 324 0104 77EEA67A 		vadd.f32	s15, s15, s13
 325              		.loc 1 110 41 view .LVU80
ARM GAS  C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s 			page 9


 326 0108 DFED586A 		vldr.32	s13, .L12+76
 327 010c 27EE267A 		vmul.f32	s14, s14, s13
 328              		.loc 1 110 34 view .LVU81
 329 0110 77EE877A 		vadd.f32	s15, s15, s14
 330              		.loc 1 110 13 view .LVU82
 331 0114 C7ED007A 		vstr.32	s15, [r7]
 111:Modules/src/sensors.c ****     gyro[1] = Tg10 * tmpx + tmpy + Tg12 * tmpz;
 332              		.loc 1 111 5 is_stmt 1 view .LVU83
 333              		.loc 1 111 20 is_stmt 0 view .LVU84
 334 0118 90ED007A 		vldr.32	s14, [r0]
 335 011c DFED547A 		vldr.32	s15, .L12+80
 336 0120 67EE277A 		vmul.f32	s15, s14, s15
 337              		.loc 1 111 27 view .LVU85
 338 0124 95ED006A 		vldr.32	s12, [r5]
 339 0128 77EE867A 		vadd.f32	s15, s15, s12
 340              		.loc 1 111 41 view .LVU86
 341 012c D4ED006A 		vldr.32	s13, [r4]
 342 0130 DFED505A 		vldr.32	s11, .L12+84
 343 0134 66EEA55A 		vmul.f32	s11, s13, s11
 344              		.loc 1 111 34 view .LVU87
 345 0138 77EEA57A 		vadd.f32	s15, s15, s11
 346              		.loc 1 111 13 view .LVU88
 347 013c C7ED017A 		vstr.32	s15, [r7, #4]
 112:Modules/src/sensors.c ****     gyro[2] = Tg20 * tmpx + Tg21 * tmpy + tmpz;
 348              		.loc 1 112 5 is_stmt 1 view .LVU89
 349              		.loc 1 112 20 is_stmt 0 view .LVU90
 350 0140 DFED4D7A 		vldr.32	s15, .L12+88
 351 0144 27EE277A 		vmul.f32	s14, s14, s15
 352              		.loc 1 112 34 view .LVU91
 353 0148 DFED4C7A 		vldr.32	s15, .L12+92
 354 014c 26EE276A 		vmul.f32	s12, s12, s15
 355              		.loc 1 112 27 view .LVU92
 356 0150 37EE067A 		vadd.f32	s14, s14, s12
 357              		.loc 1 112 41 view .LVU93
 358 0154 36EE877A 		vadd.f32	s14, s13, s14
 359              		.loc 1 112 13 view .LVU94
 360 0158 87ED027A 		vstr.32	s14, [r7, #8]
 113:Modules/src/sensors.c **** 
 114:Modules/src/sensors.c ****     tmpx = mag_raw[0] - Bm_x;
 361              		.loc 1 114 5 is_stmt 1 view .LVU95
 362              		.loc 1 114 19 is_stmt 0 view .LVU96
 363 015c B2F90030 		ldrsh	r3, [r2]
 364 0160 07EE903A 		vmov	s15, r3	@ int
 365              		.loc 1 114 23 view .LVU97
 366 0164 F8EEE77A 		vcvt.f32.s32	s15, s15
 367 0168 9FED457A 		vldr.32	s14, .L12+96
 368 016c 77EE877A 		vadd.f32	s15, s15, s14
 369              		.loc 1 114 10 view .LVU98
 370 0170 C0ED007A 		vstr.32	s15, [r0]
 115:Modules/src/sensors.c ****     tmpy = mag_raw[1] - Bm_y;
 371              		.loc 1 115 5 is_stmt 1 view .LVU99
 372              		.loc 1 115 19 is_stmt 0 view .LVU100
 373 0174 B2F90230 		ldrsh	r3, [r2, #2]
 374 0178 06EE903A 		vmov	s13, r3	@ int
 375              		.loc 1 115 23 view .LVU101
 376 017c F8EEE66A 		vcvt.f32.s32	s13, s13
 377 0180 9FED407A 		vldr.32	s14, .L12+100
ARM GAS  C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s 			page 10


 378 0184 76EEC76A 		vsub.f32	s13, s13, s14
 379              		.loc 1 115 10 view .LVU102
 380 0188 C5ED006A 		vstr.32	s13, [r5]
 116:Modules/src/sensors.c ****     tmpz = mag_raw[2] - Bm_z;
 381              		.loc 1 116 5 is_stmt 1 view .LVU103
 382              		.loc 1 116 19 is_stmt 0 view .LVU104
 383 018c B2F90430 		ldrsh	r3, [r2, #4]
 384 0190 07EE103A 		vmov	s14, r3	@ int
 385              		.loc 1 116 23 view .LVU105
 386 0194 B8EEC77A 		vcvt.f32.s32	s14, s14
 387 0198 9FED3B6A 		vldr.32	s12, .L12+104
 388 019c 37EE467A 		vsub.f32	s14, s14, s12
 389              		.loc 1 116 10 view .LVU106
 390 01a0 84ED007A 		vstr.32	s14, [r4]
 117:Modules/src/sensors.c **** 
 118:Modules/src/sensors.c ****     mag[0] = tmpx * Tm00 + tmpy * Tm01  + tmpz * Tm02;
 391              		.loc 1 118 5 is_stmt 1 view .LVU107
 392              		.loc 1 118 19 is_stmt 0 view .LVU108
 393 01a4 9FED396A 		vldr.32	s12, .L12+108
 394 01a8 67EE867A 		vmul.f32	s15, s15, s12
 395              		.loc 1 118 33 view .LVU109
 396 01ac 9FED386A 		vldr.32	s12, .L12+112
 397 01b0 66EE866A 		vmul.f32	s13, s13, s12
 398              		.loc 1 118 26 view .LVU110
 399 01b4 77EEA67A 		vadd.f32	s15, s15, s13
 400              		.loc 1 118 48 view .LVU111
 401 01b8 DFED366A 		vldr.32	s13, .L12+116
 402 01bc 27EE267A 		vmul.f32	s14, s14, s13
 403              		.loc 1 118 41 view .LVU112
 404 01c0 77EE877A 		vadd.f32	s15, s15, s14
 405              		.loc 1 118 12 view .LVU113
 406 01c4 C6ED007A 		vstr.32	s15, [r6]
 119:Modules/src/sensors.c ****     mag[1] = tmpx * Tm10 + tmpy * Tm11  + tmpz * Tm12;
 407              		.loc 1 119 5 is_stmt 1 view .LVU114
 408              		.loc 1 119 19 is_stmt 0 view .LVU115
 409 01c8 D0ED007A 		vldr.32	s15, [r0]
 410 01cc 9FED327A 		vldr.32	s14, .L12+120
 411 01d0 27EE877A 		vmul.f32	s14, s15, s14
 412              		.loc 1 119 33 view .LVU116
 413 01d4 95ED006A 		vldr.32	s12, [r5]
 414 01d8 DFED306A 		vldr.32	s13, .L12+124
 415 01dc 66EE266A 		vmul.f32	s13, s12, s13
 416              		.loc 1 119 26 view .LVU117
 417 01e0 37EE267A 		vadd.f32	s14, s14, s13
 418              		.loc 1 119 48 view .LVU118
 419 01e4 D4ED006A 		vldr.32	s13, [r4]
 420 01e8 DFED2D5A 		vldr.32	s11, .L12+128
 421 01ec 66EEA55A 		vmul.f32	s11, s13, s11
 422              		.loc 1 119 41 view .LVU119
 423 01f0 37EE257A 		vadd.f32	s14, s14, s11
 424              		.loc 1 119 12 view .LVU120
 425 01f4 86ED017A 		vstr.32	s14, [r6, #4]
 120:Modules/src/sensors.c ****     mag[2] = tmpx * Tm20 + tmpy * Tm21  + tmpz * Tm22;
 426              		.loc 1 120 5 is_stmt 1 view .LVU121
 427              		.loc 1 120 19 is_stmt 0 view .LVU122
 428 01f8 9FED2A7A 		vldr.32	s14, .L12+132
 429 01fc 67EE877A 		vmul.f32	s15, s15, s14
ARM GAS  C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s 			page 11


 430              		.loc 1 120 33 view .LVU123
 431 0200 9FED297A 		vldr.32	s14, .L12+136
 432 0204 26EE076A 		vmul.f32	s12, s12, s14
 433              		.loc 1 120 26 view .LVU124
 434 0208 77EE867A 		vadd.f32	s15, s15, s12
 435              		.loc 1 120 48 view .LVU125
 436 020c 9FED277A 		vldr.32	s14, .L12+140
 437 0210 66EE876A 		vmul.f32	s13, s13, s14
 438              		.loc 1 120 41 view .LVU126
 439 0214 77EEA67A 		vadd.f32	s15, s15, s13
 440              		.loc 1 120 12 view .LVU127
 441 0218 C6ED027A 		vstr.32	s15, [r6, #8]
 121:Modules/src/sensors.c **** }
 442              		.loc 1 121 1 view .LVU128
 443 021c F0BC     		pop	{r4, r5, r6, r7}
 444              	.LCFI4:
 445              		.cfi_restore 7
 446              		.cfi_restore 6
 447              		.cfi_restore 5
 448              		.cfi_restore 4
 449              		.cfi_def_cfa_offset 0
 450              	.LVL24:
 451              		.loc 1 121 1 view .LVU129
 452 021e 7047     		bx	lr
 453              	.L13:
 454              		.align	2
 455              	.L12:
 456 0220 C395D243 		.word	1137874371
 457 0224 BDC11BBA 		.word	-1172586051
 458 0228 00000000 		.word	tmpz
 459 022c D7A3C842 		.word	1120445399
 460 0230 E0EA1BBA 		.word	-1172575520
 461 0234 00000000 		.word	tmpy
 462 0238 AAC16B44 		.word	1147912618
 463 023c 88621CBA 		.word	-1172544888
 464 0240 00000000 		.word	tmpx
 465 0244 F8FBE6BB 		.word	-1142490120
 466 0248 94B7BE38 		.word	952022932
 467 024c B03196BB 		.word	-1147784784
 468 0250 0F9CBC41 		.word	1102879759
 469 0254 0B248B3A 		.word	982197259
 470 0258 4BE52940 		.word	1076487499
 471 025c E4748A3A 		.word	982152420
 472 0260 F2B00E41 		.word	1091481842
 473 0264 5E528C3A 		.word	982274654
 474 0268 15D426BA 		.word	-1171860459
 475 026c FCABA63B 		.word	1000778748
 476 0270 387832BB 		.word	-1154320328
 477 0274 AC4FBD3B 		.word	1002262444
 478 0278 3328073C 		.word	1007102003
 479 027c ECD2503C 		.word	1011929836
 480 0280 09262643 		.word	1126573577
 481 0284 064E3A43 		.word	1127894534
 482 0288 671A1D43 		.word	1125980775
 483 028c 8920153B 		.word	991240329
 484 0290 D59862B7 		.word	-1218275115
 485 0294 8307F838 		.word	955778947
ARM GAS  C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s 			page 12


 486 0298 BAB45938 		.word	945403066
 487 029c 6FB3113B 		.word	991015791
 488 02a0 E2E25437 		.word	928309986
 489 02a4 6DD15C37 		.word	928829805
 490 02a8 5AA05CB7 		.word	-1218666406
 491 02ac 3CD9283B 		.word	992532796
 492              		.cfi_endproc
 493              	.LFE140:
 495              		.comm	tmpz,4,4
 496              		.comm	tmpy,4,4
 497              		.comm	tmpx,4,4
 498              		.global	sensors_task_wait
 499              		.comm	mag_raw_queue,4,4
 500              		.comm	gyro_raw_queue,4,4
 501              		.comm	acc_raw_queue,4,4
 502              		.section	.rodata.sensors_task_wait,"a"
 503              		.align	2
 506              	sensors_task_wait:
 507 0000 32000000 		.word	50
 508              		.text
 509              	.Letext0:
 510              		.file 2 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\machine\\_default_ty
 511              		.file 3 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\_stdint.h"
 512              		.file 4 "Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM4F/portmacro.h"
 513              		.file 5 "Middlewares/Third_Party/FreeRTOS/Source/include/FreeRTOS.h"
 514              		.file 6 "Inc/FreeRTOSConfig.h"
 515              		.file 7 "Drivers/CMSIS/Include/core_cm4.h"
 516              		.file 8 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 517              		.file 9 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 518              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 519              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 520              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_i2c.h"
 521              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 522              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 523              		.file 15 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\lock.h"
 524              		.file 16 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\_types.h"
 525              		.file 17 "e:\\gnu tools arm embedded\\9 2019-q4-major\\lib\\gcc\\arm-none-eabi\\9.2.1\\include\\st
 526              		.file 18 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\reent.h"
 527              		.file 19 "Modules/include/utils.h"
 528              		.file 20 "Inc/i2c.h"
 529              		.file 21 "Middlewares/Third_Party/FreeRTOS/Source/include/task.h"
 530              		.file 22 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 531              		.file 23 "Modules/include/sensors.h"
 532              		.file 24 "Modules/include/system_task.h"
 533              		.file 25 "Modules/include/mpu6050.h"
 534              		.file 26 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\stdio.h"
 535              		.file 27 "Modules/include/hmc5883l.h"
 536              		.file 28 "Modules/include/ms5611.h"
 537              		.file 29 "<built-in>"
ARM GAS  C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s 			page 13


DEFINED SYMBOLS
                            *ABS*:00000000 sensors.c
C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s:18     .rodata.SensorsInit.str1.4:00000000 $d
C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s:37     .text.SensorsInit:00000000 $t
C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s:45     .text.SensorsInit:00000000 SensorsInit
C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s:130    .text.SensorsInit:00000050 $d
C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s:140    .text.SensorsTask:00000000 $t
C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s:147    .text.SensorsTask:00000000 SensorsTask
C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s:185    .text.IMUCalibration:00000000 $t
C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s:192    .text.IMUCalibration:00000000 IMUCalibration
C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s:456    .text.IMUCalibration:00000220 $d
                            *COM*:00000004 tmpz
                            *COM*:00000004 tmpy
                            *COM*:00000004 tmpx
C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s:506    .rodata.sensors_task_wait:00000000 sensors_task_wait
                            *COM*:00000004 mag_raw_queue
                            *COM*:00000004 gyro_raw_queue
                            *COM*:00000004 acc_raw_queue
C:\Users\luoha\AppData\Local\Temp\ccGFtV5Q.s:503    .rodata.sensors_task_wait:00000000 $d

UNDEFINED SYMBOLS
puts
MPU6050Init
printf
HMC5883LInit
MS5611Init
SystemWaitStart
xTaskGetTickCount
vTaskDelayUntil

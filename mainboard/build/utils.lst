ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc3YYg8u.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"utils.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text._write,"ax",%progbits
  18              		.align	1
  19              		.global	_write
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	_write:
  27              	.LVL0:
  28              	.LFB133:
  29              		.file 1 "Modules/src/utils.c"
   1:Modules/src/utils.c **** #include "utils.h"
   2:Modules/src/utils.c **** 
   3:Modules/src/utils.c **** // #ifdef __GNUC__
   4:Modules/src/utils.c **** // #define PUTCHAR_PROTOTYPE int __io_putchar(int ch)
   5:Modules/src/utils.c **** // #else
   6:Modules/src/utils.c **** // #define PUTCHAR_PROTOTYPE int fputc(int ch, FILE *f)
   7:Modules/src/utils.c **** // #endif
   8:Modules/src/utils.c **** 
   9:Modules/src/utils.c **** // PUTCHAR_PROTOTYPE {
  10:Modules/src/utils.c **** //     /* Place your implementation of fputc here */
  11:Modules/src/utils.c **** //     /* e.g. write a character to the USART1 and Loop until the end of transmission */
  12:Modules/src/utils.c **** //     // HAL_UART_Transmit(&huart1, (uint8_t *)&ch, 1, 0xFFFF);
  13:Modules/src/utils.c **** //     HAL_UART_Transmit_DMA(&huart1, (uint8_t *)&ch, 1);
  14:Modules/src/utils.c **** //     return ch;
  15:Modules/src/utils.c **** // }
  16:Modules/src/utils.c **** 
  17:Modules/src/utils.c **** int _write(int32_t file, uint8_t *ptr, int32_t len) {
  30              		.loc 1 17 53 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 17 53 is_stmt 0 view .LVU1
  35 0000 10B5     		push	{r4, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 4, -8
  39              		.cfi_offset 14, -4
  40 0002 1446     		mov	r4, r2
  18:Modules/src/utils.c ****     /* Implement your write code here, this is used by puts and printf for example */
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc3YYg8u.s 			page 2


  19:Modules/src/utils.c ****     int DataIdx;
  41              		.loc 1 19 5 is_stmt 1 view .LVU2
  20:Modules/src/utils.c ****     // for (DataIdx = 0; DataIdx < len; DataIdx++) {
  21:Modules/src/utils.c ****     //     __io_putchar(*ptr++);
  22:Modules/src/utils.c ****     // }
  23:Modules/src/utils.c ****     HAL_UART_Transmit_DMA(&huart1, ptr, len);
  42              		.loc 1 23 5 view .LVU3
  43 0004 92B2     		uxth	r2, r2
  44              	.LVL1:
  45              		.loc 1 23 5 is_stmt 0 view .LVU4
  46 0006 0248     		ldr	r0, .L3
  47              	.LVL2:
  48              		.loc 1 23 5 view .LVU5
  49 0008 FFF7FEFF 		bl	HAL_UART_Transmit_DMA
  50              	.LVL3:
  24:Modules/src/utils.c ****     return len;
  51              		.loc 1 24 5 is_stmt 1 view .LVU6
  25:Modules/src/utils.c ****     /* return len; */
  26:Modules/src/utils.c **** }
  52              		.loc 1 26 1 is_stmt 0 view .LVU7
  53 000c 2046     		mov	r0, r4
  54 000e 10BD     		pop	{r4, pc}
  55              	.LVL4:
  56              	.L4:
  57              		.loc 1 26 1 view .LVU8
  58              		.align	2
  59              	.L3:
  60 0010 00000000 		.word	huart1
  61              		.cfi_endproc
  62              	.LFE133:
  64              		.section	.rodata.itoa.str1.4,"aMS",%progbits,1
  65              		.align	2
  66              	.LC0:
  67 0000 7A797877 		.ascii	"zyxwvutsrqponmlkjihgfedcba9876543210123456789abcdef"
  67      76757473 
  67      7271706F 
  67      6E6D6C6B 
  67      6A696867 
  68 0033 6768696A 		.ascii	"ghijklmnopqrstuvwxyz\000"
  68      6B6C6D6E 
  68      6F707172 
  68      73747576 
  68      7778797A 
  69              		.section	.text.itoa,"ax",%progbits
  70              		.align	1
  71              		.global	itoa
  72              		.syntax unified
  73              		.thumb
  74              		.thumb_func
  75              		.fpu fpv4-sp-d16
  77              	itoa:
  78              	.LVL5:
  79              	.LFB134:
  27:Modules/src/utils.c **** 
  28:Modules/src/utils.c **** char *itoa(int value, char *result, int base) {
  80              		.loc 1 28 47 is_stmt 1 view -0
  81              		.cfi_startproc
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc3YYg8u.s 			page 3


  82              		@ args = 0, pretend = 0, frame = 0
  83              		@ frame_needed = 0, uses_anonymous_args = 0
  84              		@ link register save eliminated.
  85              		.loc 1 28 47 is_stmt 0 view .LVU10
  86 0000 F0B4     		push	{r4, r5, r6, r7}
  87              	.LCFI1:
  88              		.cfi_def_cfa_offset 16
  89              		.cfi_offset 4, -16
  90              		.cfi_offset 5, -12
  91              		.cfi_offset 6, -8
  92              		.cfi_offset 7, -4
  93 0002 0546     		mov	r5, r0
  94 0004 0846     		mov	r0, r1
  95              	.LVL6:
  29:Modules/src/utils.c ****     // check that the base if valid
  30:Modules/src/utils.c ****     if (base < 2 || base > 36) {
  96              		.loc 1 30 5 is_stmt 1 view .LVU11
  97              		.loc 1 30 18 is_stmt 0 view .LVU12
  98 0006 931E     		subs	r3, r2, #2
  99              		.loc 1 30 8 view .LVU13
 100 0008 222B     		cmp	r3, #34
 101 000a 14D8     		bhi	.L13
  31:Modules/src/utils.c ****         *result = '\0';
  32:Modules/src/utils.c ****         return result;
  33:Modules/src/utils.c ****     }
  34:Modules/src/utils.c **** 
  35:Modules/src/utils.c ****     char *ptr = result, *ptr1 = result, tmp_char;
 102              		.loc 1 35 11 view .LVU14
 103 000c 0B46     		mov	r3, r1
 104              	.LVL7:
 105              	.L6:
  36:Modules/src/utils.c ****     int tmp_value;
 106              		.loc 1 36 5 is_stmt 1 discriminator 1 view .LVU15
  37:Modules/src/utils.c **** 
  38:Modules/src/utils.c ****     do {
 107              		.loc 1 38 5 discriminator 1 view .LVU16
  39:Modules/src/utils.c ****         tmp_value = value;
 108              		.loc 1 39 9 discriminator 1 view .LVU17
  40:Modules/src/utils.c ****         value /= base;
 109              		.loc 1 40 9 discriminator 1 view .LVU18
 110 000e 2E46     		mov	r6, r5
 111              		.loc 1 40 15 is_stmt 0 discriminator 1 view .LVU19
 112 0010 95FBF2F5 		sdiv	r5, r5, r2
 113              	.LVL8:
  41:Modules/src/utils.c ****         *ptr++ = "zyxwvutsrqponmlkjihgfedcba9876543210123456789abcdefghijklmnopqrstuvwxyz"[35 + (tm
 114              		.loc 1 41 9 is_stmt 1 discriminator 1 view .LVU20
 115              		.loc 1 41 95 is_stmt 0 discriminator 1 view .LVU21
 116 0014 02FB1564 		mls	r4, r2, r5, r6
 117 0018 2334     		adds	r4, r4, #35
 118 001a 1946     		mov	r1, r3
 119              		.loc 1 41 13 discriminator 1 view .LVU22
 120 001c 0133     		adds	r3, r3, #1
 121              	.LVL9:
 122              		.loc 1 41 91 discriminator 1 view .LVU23
 123 001e 0E4F     		ldr	r7, .L15
 124 0020 3C5D     		ldrb	r4, [r7, r4]	@ zero_extendqisi2
 125              		.loc 1 41 16 discriminator 1 view .LVU24
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc3YYg8u.s 			page 4


 126 0022 0C70     		strb	r4, [r1]
  42:Modules/src/utils.c ****     } while (value);
 127              		.loc 1 42 13 is_stmt 1 discriminator 1 view .LVU25
 128              		.loc 1 42 5 is_stmt 0 discriminator 1 view .LVU26
 129 0024 002D     		cmp	r5, #0
 130 0026 F2D1     		bne	.L6
  43:Modules/src/utils.c **** 
  44:Modules/src/utils.c ****     // Apply negative sign
  45:Modules/src/utils.c ****     if (tmp_value < 0) *ptr++ = '-';
 131              		.loc 1 45 5 is_stmt 1 view .LVU27
 132              		.loc 1 45 8 is_stmt 0 view .LVU28
 133 0028 002E     		cmp	r6, #0
 134 002a 07DB     		blt	.L14
 135              	.LVL10:
 136              	.L8:
  46:Modules/src/utils.c ****     *ptr-- = '\0';
 137              		.loc 1 46 5 is_stmt 1 view .LVU29
 138              		.loc 1 46 12 is_stmt 0 view .LVU30
 139 002c 0022     		movs	r2, #0
 140 002e 03F80129 		strb	r2, [r3], #-1
 141              	.LVL11:
  47:Modules/src/utils.c ****     while (ptr1 < ptr) {
 142              		.loc 1 47 5 is_stmt 1 view .LVU31
  35:Modules/src/utils.c ****     int tmp_value;
 143              		.loc 1 35 26 is_stmt 0 view .LVU32
 144 0032 0246     		mov	r2, r0
 145              		.loc 1 47 11 view .LVU33
 146 0034 0CE0     		b	.L9
 147              	.LVL12:
 148              	.L13:
  31:Modules/src/utils.c ****         return result;
 149              		.loc 1 31 9 is_stmt 1 view .LVU34
  31:Modules/src/utils.c ****         return result;
 150              		.loc 1 31 17 is_stmt 0 view .LVU35
 151 0036 0023     		movs	r3, #0
 152 0038 0B70     		strb	r3, [r1]
  32:Modules/src/utils.c ****     }
 153              		.loc 1 32 9 is_stmt 1 view .LVU36
  32:Modules/src/utils.c ****     }
 154              		.loc 1 32 16 is_stmt 0 view .LVU37
 155 003a 0BE0     		b	.L7
 156              	.LVL13:
 157              	.L14:
  45:Modules/src/utils.c ****     *ptr-- = '\0';
 158              		.loc 1 45 24 is_stmt 1 discriminator 1 view .LVU38
  45:Modules/src/utils.c ****     *ptr-- = '\0';
 159              		.loc 1 45 31 is_stmt 0 discriminator 1 view .LVU39
 160 003c 2D22     		movs	r2, #45
 161              	.LVL14:
  45:Modules/src/utils.c ****     *ptr-- = '\0';
 162              		.loc 1 45 31 discriminator 1 view .LVU40
 163 003e 1A70     		strb	r2, [r3]
  45:Modules/src/utils.c ****     *ptr-- = '\0';
 164              		.loc 1 45 28 discriminator 1 view .LVU41
 165 0040 8B1C     		adds	r3, r1, #2
 166              	.LVL15:
  45:Modules/src/utils.c ****     *ptr-- = '\0';
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc3YYg8u.s 			page 5


 167              		.loc 1 45 28 discriminator 1 view .LVU42
 168 0042 F3E7     		b	.L8
 169              	.LVL16:
 170              	.L10:
  48:Modules/src/utils.c ****         tmp_char = *ptr;
 171              		.loc 1 48 9 is_stmt 1 view .LVU43
 172              		.loc 1 48 18 is_stmt 0 view .LVU44
 173 0044 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 174              	.LVL17:
  49:Modules/src/utils.c ****         *ptr--   = *ptr1;
 175              		.loc 1 49 9 is_stmt 1 view .LVU45
 176              		.loc 1 49 20 is_stmt 0 view .LVU46
 177 0046 1478     		ldrb	r4, [r2]	@ zero_extendqisi2
 178              		.loc 1 49 18 view .LVU47
 179 0048 03F80149 		strb	r4, [r3], #-1
 180              	.LVL18:
  50:Modules/src/utils.c ****         *ptr1++  = tmp_char;
 181              		.loc 1 50 9 is_stmt 1 view .LVU48
 182              		.loc 1 50 18 is_stmt 0 view .LVU49
 183 004c 02F8011B 		strb	r1, [r2], #1
 184              	.LVL19:
 185              	.L9:
  47:Modules/src/utils.c ****         tmp_char = *ptr;
 186              		.loc 1 47 11 is_stmt 1 view .LVU50
 187 0050 9342     		cmp	r3, r2
 188 0052 F7D8     		bhi	.L10
 189              	.LVL20:
 190              	.L7:
  51:Modules/src/utils.c ****     }
  52:Modules/src/utils.c ****     return result;
  53:Modules/src/utils.c **** }...
 191              		.loc 1 53 1 is_stmt 0 view .LVU51
 192 0054 F0BC     		pop	{r4, r5, r6, r7}
 193              	.LCFI2:
 194              		.cfi_restore 7
 195              		.cfi_restore 6
 196              		.cfi_restore 5
 197              		.cfi_restore 4
 198              		.cfi_def_cfa_offset 0
 199              	.LVL21:
 200              		.loc 1 53 1 view .LVU52
 201 0056 7047     		bx	lr
 202              	.L16:
 203              		.align	2
 204              	.L15:
 205 0058 00000000 		.word	.LC0
 206              		.cfi_endproc
 207              	.LFE134:
 209              		.text
 210              	.Letext0:
 211              		.file 2 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\machine\\_default_ty
 212              		.file 3 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\_stdint.h"
 213              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 214              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 215              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 216              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 217              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc3YYg8u.s 			page 6


 218              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 219              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 220              		.file 11 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\lock.h"
 221              		.file 12 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\_types.h"
 222              		.file 13 "e:\\gnu tools arm embedded\\9 2019-q4-major\\lib\\gcc\\arm-none-eabi\\9.2.1\\include\\st
 223              		.file 14 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\reent.h"
 224              		.file 15 "Modules/include/utils.h"
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc3YYg8u.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 utils.c
C:\Users\luoha\AppData\Local\Temp\cc3YYg8u.s:18     .text._write:00000000 $t
C:\Users\luoha\AppData\Local\Temp\cc3YYg8u.s:26     .text._write:00000000 _write
C:\Users\luoha\AppData\Local\Temp\cc3YYg8u.s:60     .text._write:00000010 $d
C:\Users\luoha\AppData\Local\Temp\cc3YYg8u.s:65     .rodata.itoa.str1.4:00000000 $d
C:\Users\luoha\AppData\Local\Temp\cc3YYg8u.s:70     .text.itoa:00000000 $t
C:\Users\luoha\AppData\Local\Temp\cc3YYg8u.s:77     .text.itoa:00000000 itoa
C:\Users\luoha\AppData\Local\Temp\cc3YYg8u.s:205    .text.itoa:00000058 $d

UNDEFINED SYMBOLS
HAL_UART_Transmit_DMA
huart1

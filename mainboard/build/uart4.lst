ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"uart4.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.UartRxCheck.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 25750D0A 		.ascii	"%u\015\012\000"
  20      00
  21              		.section	.text.UartRxCheck,"ax",%progbits
  22              		.align	1
  23              		.arch armv7e-m
  24              		.syntax unified
  25              		.thumb
  26              		.thumb_func
  27              		.fpu fpv4-sp-d16
  29              	UartRxCheck:
  30              	.LFB144:
  31              		.file 1 "Modules/src/uart4.c"
   1:Modules/src/uart4.c **** #include "uart4.h"
   2:Modules/src/uart4.c **** 
   3:Modules/src/uart4.c **** static uint8_t rx_buffer[RX_BUFFER_SIZE];
   4:Modules/src/uart4.c **** 
   5:Modules/src/uart4.c **** xQueueHandle uart4_queue;
   6:Modules/src/uart4.c **** STATIC_MEM_QUEUE_ALLOC(uart4_queue, 5, sizeof(uart4_queue_buffer));
   7:Modules/src/uart4.c **** 
   8:Modules/src/uart4.c **** void Uart4Init(void) {
   9:Modules/src/uart4.c ****     printf("Uart4Init");
  10:Modules/src/uart4.c ****     uart4_queue = STATIC_MEM_QUEUE_CREATE(uart4_queue);
  11:Modules/src/uart4.c **** 
  12:Modules/src/uart4.c ****     //使能IDLE中断
  13:Modules/src/uart4.c ****     __HAL_UART_ENABLE_IT(&huart4, UART_IT_IDLE);
  14:Modules/src/uart4.c ****     //使能接收中断
  15:Modules/src/uart4.c ****     HAL_UART_Receive_DMA(&huart4, rx_buffer, RX_BUFFER_SIZE);
  16:Modules/src/uart4.c **** }
  17:Modules/src/uart4.c **** 
  18:Modules/src/uart4.c **** void UART4_IRQHandler(void) {
  19:Modules/src/uart4.c ****     if (__HAL_UART_GET_FLAG(&huart4, UART_FLAG_IDLE) != RESET) {
  20:Modules/src/uart4.c ****         __HAL_UART_CLEAR_IDLEFLAG(&huart4);
  21:Modules/src/uart4.c ****         UartRxCheck();
  22:Modules/src/uart4.c ****     } else {
  23:Modules/src/uart4.c ****         HAL_UART_IRQHandler(&huart4);
  24:Modules/src/uart4.c ****     }
  25:Modules/src/uart4.c **** }
  26:Modules/src/uart4.c **** 
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s 			page 2


  27:Modules/src/uart4.c **** void DMA1_Stream2_IRQHandler(void) {
  28:Modules/src/uart4.c ****     HAL_DMA_IRQHandler(huart4.hdmarx);
  29:Modules/src/uart4.c **** }
  30:Modules/src/uart4.c **** 
  31:Modules/src/uart4.c **** void DMA1_Stream4_IRQHandler(void) {
  32:Modules/src/uart4.c ****     HAL_DMA_IRQHandler(huart4.hdmatx);
  33:Modules/src/uart4.c **** }
  34:Modules/src/uart4.c **** 
  35:Modules/src/uart4.c **** void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart) {
  36:Modules/src/uart4.c ****     if (huart->Instance == UART4) {
  37:Modules/src/uart4.c ****         UartRxCheck();
  38:Modules/src/uart4.c ****     }
  39:Modules/src/uart4.c **** }
  40:Modules/src/uart4.c **** 
  41:Modules/src/uart4.c **** void HAL_UART_RxHalfCpltCallback(UART_HandleTypeDef *huart) {
  42:Modules/src/uart4.c ****     if (huart->Instance == UART4) {
  43:Modules/src/uart4.c ****         UartRxCheck();
  44:Modules/src/uart4.c ****     }
  45:Modules/src/uart4.c **** }
  46:Modules/src/uart4.c **** 
  47:Modules/src/uart4.c **** void UartRxCheck(void) {
  32              		.loc 1 47 24 view -0
  33              		.cfi_startproc
  34              		@ args = 0, pretend = 0, frame = 16
  35              		@ frame_needed = 0, uses_anonymous_args = 0
  36 0000 10B5     		push	{r4, lr}
  37              	.LCFI0:
  38              		.cfi_def_cfa_offset 8
  39              		.cfi_offset 4, -8
  40              		.cfi_offset 14, -4
  41 0002 84B0     		sub	sp, sp, #16
  42              	.LCFI1:
  43              		.cfi_def_cfa_offset 24
  48:Modules/src/uart4.c ****     static size_t old_pos;
  44              		.loc 1 48 5 view .LVU1
  49:Modules/src/uart4.c ****     size_t pos;
  45              		.loc 1 49 5 view .LVU2
  50:Modules/src/uart4.c ****     uart4_queue_buffer buffer;
  46              		.loc 1 50 5 view .LVU3
  51:Modules/src/uart4.c ****     portBASE_TYPE xHigherPriorityTaskWoken = pdFALSE;
  47              		.loc 1 51 5 view .LVU4
  48              		.loc 1 51 19 is_stmt 0 view .LVU5
  49 0004 0023     		movs	r3, #0
  50 0006 0193     		str	r3, [sp, #4]
  52:Modules/src/uart4.c **** 
  53:Modules/src/uart4.c ****     /* Calculate current position in buffer */
  54:Modules/src/uart4.c ****     pos = RX_BUFFER_SIZE - __HAL_DMA_GET_COUNTER(huart4.hdmarx);
  51              		.loc 1 54 5 is_stmt 1 view .LVU6
  52              		.loc 1 54 28 is_stmt 0 view .LVU7
  53 0008 234B     		ldr	r3, .L8
  54 000a 5B6B     		ldr	r3, [r3, #52]
  55 000c 1B68     		ldr	r3, [r3]
  56 000e 5C68     		ldr	r4, [r3, #4]
  57              		.loc 1 54 9 view .LVU8
  58 0010 C4F18004 		rsb	r4, r4, #128
  59              	.LVL0:
  55:Modules/src/uart4.c **** 
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s 			page 3


  56:Modules/src/uart4.c ****     printf("%u\r\n", pos);
  60              		.loc 1 56 5 is_stmt 1 view .LVU9
  61 0014 2146     		mov	r1, r4
  62 0016 2148     		ldr	r0, .L8+4
  63 0018 FFF7FEFF 		bl	printf
  64              	.LVL1:
  57:Modules/src/uart4.c **** 
  58:Modules/src/uart4.c ****     if (pos != old_pos) {    /* Check change in received data */
  65              		.loc 1 58 5 view .LVU10
  66              		.loc 1 58 13 is_stmt 0 view .LVU11
  67 001c 204B     		ldr	r3, .L8+8
  68 001e 1B68     		ldr	r3, [r3]
  69              		.loc 1 58 8 view .LVU12
  70 0020 A342     		cmp	r3, r4
  71 0022 0CD0     		beq	.L2
  59:Modules/src/uart4.c ****         if (pos > old_pos) { /* Current position is over previous one */
  72              		.loc 1 59 9 is_stmt 1 view .LVU13
  73              		.loc 1 59 12 is_stmt 0 view .LVU14
  74 0024 1BD2     		bcs	.L3
  60:Modules/src/uart4.c ****             /* We are in "linear" mode */
  61:Modules/src/uart4.c ****             /* Process data directly by subtracting "pointers" */
  62:Modules/src/uart4.c ****             buffer.addr   = &rx_buffer[old_pos];
  75              		.loc 1 62 13 is_stmt 1 view .LVU15
  76              		.loc 1 62 29 is_stmt 0 view .LVU16
  77 0026 1F4A     		ldr	r2, .L8+12
  78 0028 1A44     		add	r2, r2, r3
  79              		.loc 1 62 27 view .LVU17
  80 002a 0392     		str	r2, [sp, #12]
  63:Modules/src/uart4.c ****             buffer.length = pos - old_pos;
  81              		.loc 1 63 13 is_stmt 1 view .LVU18
  82              		.loc 1 63 33 is_stmt 0 view .LVU19
  83 002c E31A     		subs	r3, r4, r3
  84              		.loc 1 63 27 view .LVU20
  85 002e 0293     		str	r3, [sp, #8]
  64:Modules/src/uart4.c ****             xQueueSendFromISR(uart4_queue, &buffer, &xHigherPriorityTaskWoken);
  86              		.loc 1 64 13 is_stmt 1 view .LVU21
  87 0030 0023     		movs	r3, #0
  88 0032 01AA     		add	r2, sp, #4
  89 0034 02A9     		add	r1, sp, #8
  90 0036 1C48     		ldr	r0, .L8+16
  91 0038 0068     		ldr	r0, [r0]
  92 003a FFF7FEFF 		bl	xQueueGenericSendFromISR
  93              	.LVL2:
  94              	.L2:
  65:Modules/src/uart4.c ****         } else {
  66:Modules/src/uart4.c ****             /* We are in "overflow" mode */
  67:Modules/src/uart4.c ****             /* First process data to the end of buffer */
  68:Modules/src/uart4.c ****             buffer.addr   = &rx_buffer[old_pos];
  69:Modules/src/uart4.c ****             buffer.length = RX_BUFFER_SIZE - old_pos;
  70:Modules/src/uart4.c ****             xQueueSendFromISR(uart4_queue, &buffer, &xHigherPriorityTaskWoken);
  71:Modules/src/uart4.c ****             /* Check and continue with beginning of buffer */
  72:Modules/src/uart4.c ****             if (pos > 0) {
  73:Modules/src/uart4.c ****                 buffer.addr   = &rx_buffer[0];
  74:Modules/src/uart4.c ****                 buffer.length = pos;
  75:Modules/src/uart4.c ****                 xQueueSendFromISR(uart4_queue, &buffer, &xHigherPriorityTaskWoken);
  76:Modules/src/uart4.c ****             }
  77:Modules/src/uart4.c ****         }
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s 			page 4


  78:Modules/src/uart4.c ****     }
  79:Modules/src/uart4.c ****     old_pos = pos; /* Save current position as old */
  95              		.loc 1 79 5 view .LVU22
  96              		.loc 1 79 13 is_stmt 0 view .LVU23
  97 003e 184B     		ldr	r3, .L8+8
  98 0040 1C60     		str	r4, [r3]
  80:Modules/src/uart4.c **** 
  81:Modules/src/uart4.c ****     /* Check and manually update if we reached end of buffer */
  82:Modules/src/uart4.c ****     if (old_pos == RX_BUFFER_SIZE) {
  99              		.loc 1 82 5 is_stmt 1 view .LVU24
 100              		.loc 1 82 8 is_stmt 0 view .LVU25
 101 0042 802C     		cmp	r4, #128
 102 0044 25D0     		beq	.L7
 103              	.L4:
  83:Modules/src/uart4.c ****         old_pos = 0;
  84:Modules/src/uart4.c ****     }
  85:Modules/src/uart4.c **** 
  86:Modules/src/uart4.c ****     portYIELD_FROM_ISR(xHigherPriorityTaskWoken);
 104              		.loc 1 86 5 is_stmt 1 view .LVU26
 105 0046 019B     		ldr	r3, [sp, #4]
 106 0048 3BB1     		cbz	r3, .L1
 107              		.loc 1 86 5 discriminator 1 view .LVU27
 108 004a 184B     		ldr	r3, .L8+20
 109 004c 4FF08052 		mov	r2, #268435456
 110 0050 1A60     		str	r2, [r3]
 111              		.loc 1 86 5 discriminator 1 view .LVU28
 112              		.syntax unified
 113              	@ 86 "Modules/src/uart4.c" 1
 114 0052 BFF34F8F 		dsb
 115              	@ 0 "" 2
 116              		.loc 1 86 5 discriminator 1 view .LVU29
 117              	@ 86 "Modules/src/uart4.c" 1
 118 0056 BFF36F8F 		isb
 119              	@ 0 "" 2
 120              		.loc 1 86 49 discriminator 1 view .LVU30
 121              		.thumb
 122              		.syntax unified
 123              	.L1:
  87:Modules/src/uart4.c **** }
 124              		.loc 1 87 1 is_stmt 0 view .LVU31
 125 005a 04B0     		add	sp, sp, #16
 126              	.LCFI2:
 127              		.cfi_remember_state
 128              		.cfi_def_cfa_offset 8
 129              		@ sp needed
 130 005c 10BD     		pop	{r4, pc}
 131              	.LVL3:
 132              	.L3:
 133              	.LCFI3:
 134              		.cfi_restore_state
  68:Modules/src/uart4.c ****             buffer.length = RX_BUFFER_SIZE - old_pos;
 135              		.loc 1 68 13 is_stmt 1 view .LVU32
  68:Modules/src/uart4.c ****             buffer.length = RX_BUFFER_SIZE - old_pos;
 136              		.loc 1 68 29 is_stmt 0 view .LVU33
 137 005e 114A     		ldr	r2, .L8+12
 138 0060 1A44     		add	r2, r2, r3
  68:Modules/src/uart4.c ****             buffer.length = RX_BUFFER_SIZE - old_pos;
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s 			page 5


 139              		.loc 1 68 27 view .LVU34
 140 0062 0392     		str	r2, [sp, #12]
  69:Modules/src/uart4.c ****             xQueueSendFromISR(uart4_queue, &buffer, &xHigherPriorityTaskWoken);
 141              		.loc 1 69 13 is_stmt 1 view .LVU35
  69:Modules/src/uart4.c ****             xQueueSendFromISR(uart4_queue, &buffer, &xHigherPriorityTaskWoken);
 142              		.loc 1 69 44 is_stmt 0 view .LVU36
 143 0064 C3F18003 		rsb	r3, r3, #128
  69:Modules/src/uart4.c ****             xQueueSendFromISR(uart4_queue, &buffer, &xHigherPriorityTaskWoken);
 144              		.loc 1 69 27 view .LVU37
 145 0068 0293     		str	r3, [sp, #8]
  70:Modules/src/uart4.c ****             /* Check and continue with beginning of buffer */
 146              		.loc 1 70 13 is_stmt 1 view .LVU38
 147 006a 0023     		movs	r3, #0
 148 006c 01AA     		add	r2, sp, #4
 149 006e 02A9     		add	r1, sp, #8
 150 0070 0D48     		ldr	r0, .L8+16
 151 0072 0068     		ldr	r0, [r0]
 152 0074 FFF7FEFF 		bl	xQueueGenericSendFromISR
 153              	.LVL4:
  72:Modules/src/uart4.c ****                 buffer.addr   = &rx_buffer[0];
 154              		.loc 1 72 13 view .LVU39
  72:Modules/src/uart4.c ****                 buffer.addr   = &rx_buffer[0];
 155              		.loc 1 72 16 is_stmt 0 view .LVU40
 156 0078 002C     		cmp	r4, #0
 157 007a E0D0     		beq	.L2
  73:Modules/src/uart4.c ****                 buffer.length = pos;
 158              		.loc 1 73 17 is_stmt 1 view .LVU41
  73:Modules/src/uart4.c ****                 buffer.length = pos;
 159              		.loc 1 73 31 is_stmt 0 view .LVU42
 160 007c 094B     		ldr	r3, .L8+12
 161 007e 0393     		str	r3, [sp, #12]
  74:Modules/src/uart4.c ****                 xQueueSendFromISR(uart4_queue, &buffer, &xHigherPriorityTaskWoken);
 162              		.loc 1 74 17 is_stmt 1 view .LVU43
  74:Modules/src/uart4.c ****                 xQueueSendFromISR(uart4_queue, &buffer, &xHigherPriorityTaskWoken);
 163              		.loc 1 74 31 is_stmt 0 view .LVU44
 164 0080 0294     		str	r4, [sp, #8]
  75:Modules/src/uart4.c ****             }
 165              		.loc 1 75 17 is_stmt 1 view .LVU45
 166 0082 0023     		movs	r3, #0
 167 0084 01AA     		add	r2, sp, #4
 168 0086 02A9     		add	r1, sp, #8
 169 0088 0748     		ldr	r0, .L8+16
 170 008a 0068     		ldr	r0, [r0]
 171 008c FFF7FEFF 		bl	xQueueGenericSendFromISR
 172              	.LVL5:
 173 0090 D5E7     		b	.L2
 174              	.L7:
  83:Modules/src/uart4.c ****     }
 175              		.loc 1 83 9 view .LVU46
  83:Modules/src/uart4.c ****     }
 176              		.loc 1 83 17 is_stmt 0 view .LVU47
 177 0092 0022     		movs	r2, #0
 178 0094 1A60     		str	r2, [r3]
 179 0096 D6E7     		b	.L4
 180              	.L9:
 181              		.align	2
 182              	.L8:
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s 			page 6


 183 0098 00000000 		.word	huart4
 184 009c 00000000 		.word	.LC0
 185 00a0 00000000 		.word	.LANCHOR0
 186 00a4 00000000 		.word	.LANCHOR1
 187 00a8 00000000 		.word	uart4_queue
 188 00ac 04ED00E0 		.word	-536810236
 189              		.cfi_endproc
 190              	.LFE144:
 192              		.section	.rodata.Uart4Init.str1.4,"aMS",%progbits,1
 193              		.align	2
 194              	.LC1:
 195 0000 55617274 		.ascii	"Uart4Init\000"
 195      34496E69 
 195      7400
 196              		.section	.text.Uart4Init,"ax",%progbits
 197              		.align	1
 198              		.global	Uart4Init
 199              		.syntax unified
 200              		.thumb
 201              		.thumb_func
 202              		.fpu fpv4-sp-d16
 204              	Uart4Init:
 205              	.LFB138:
   8:Modules/src/uart4.c ****     printf("Uart4Init");
 206              		.loc 1 8 22 is_stmt 1 view -0
 207              		.cfi_startproc
 208              		@ args = 0, pretend = 0, frame = 0
 209              		@ frame_needed = 0, uses_anonymous_args = 0
 210 0000 00B5     		push	{lr}
 211              	.LCFI4:
 212              		.cfi_def_cfa_offset 4
 213              		.cfi_offset 14, -4
 214 0002 83B0     		sub	sp, sp, #12
 215              	.LCFI5:
 216              		.cfi_def_cfa_offset 16
   9:Modules/src/uart4.c ****     uart4_queue = STATIC_MEM_QUEUE_CREATE(uart4_queue);
 217              		.loc 1 9 5 view .LVU49
 218 0004 0C48     		ldr	r0, .L12
 219 0006 FFF7FEFF 		bl	printf
 220              	.LVL6:
  10:Modules/src/uart4.c **** 
 221              		.loc 1 10 5 view .LVU50
  10:Modules/src/uart4.c **** 
 222              		.loc 1 10 19 is_stmt 0 view .LVU51
 223 000a 0023     		movs	r3, #0
 224 000c 0093     		str	r3, [sp]
 225 000e 0B4B     		ldr	r3, .L12+4
 226 0010 0B4A     		ldr	r2, .L12+8
 227 0012 0821     		movs	r1, #8
 228 0014 0520     		movs	r0, #5
 229 0016 FFF7FEFF 		bl	xQueueGenericCreateStatic
 230              	.LVL7:
  10:Modules/src/uart4.c **** 
 231              		.loc 1 10 17 view .LVU52
 232 001a 0A4B     		ldr	r3, .L12+12
 233 001c 1860     		str	r0, [r3]
  13:Modules/src/uart4.c ****     //使能接收中断
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s 			page 7


 234              		.loc 1 13 5 is_stmt 1 view .LVU53
 235 001e 0A48     		ldr	r0, .L12+16
 236 0020 0268     		ldr	r2, [r0]
 237 0022 D368     		ldr	r3, [r2, #12]
 238 0024 43F01003 		orr	r3, r3, #16
 239 0028 D360     		str	r3, [r2, #12]
  15:Modules/src/uart4.c **** }
 240              		.loc 1 15 5 view .LVU54
 241 002a 8022     		movs	r2, #128
 242 002c 0749     		ldr	r1, .L12+20
 243 002e FFF7FEFF 		bl	HAL_UART_Receive_DMA
 244              	.LVL8:
  16:Modules/src/uart4.c **** 
 245              		.loc 1 16 1 is_stmt 0 view .LVU55
 246 0032 03B0     		add	sp, sp, #12
 247              	.LCFI6:
 248              		.cfi_def_cfa_offset 4
 249              		@ sp needed
 250 0034 5DF804FB 		ldr	pc, [sp], #4
 251              	.L13:
 252              		.align	2
 253              	.L12:
 254 0038 00000000 		.word	.LC1
 255 003c 00000000 		.word	.LANCHOR2
 256 0040 00000000 		.word	.LANCHOR3
 257 0044 00000000 		.word	uart4_queue
 258 0048 00000000 		.word	huart4
 259 004c 00000000 		.word	.LANCHOR1
 260              		.cfi_endproc
 261              	.LFE138:
 263              		.section	.text.UART4_IRQHandler,"ax",%progbits
 264              		.align	1
 265              		.global	UART4_IRQHandler
 266              		.syntax unified
 267              		.thumb
 268              		.thumb_func
 269              		.fpu fpv4-sp-d16
 271              	UART4_IRQHandler:
 272              	.LFB139:
  18:Modules/src/uart4.c ****     if (__HAL_UART_GET_FLAG(&huart4, UART_FLAG_IDLE) != RESET) {
 273              		.loc 1 18 29 is_stmt 1 view -0
 274              		.cfi_startproc
 275              		@ args = 0, pretend = 0, frame = 8
 276              		@ frame_needed = 0, uses_anonymous_args = 0
 277 0000 00B5     		push	{lr}
 278              	.LCFI7:
 279              		.cfi_def_cfa_offset 4
 280              		.cfi_offset 14, -4
 281 0002 83B0     		sub	sp, sp, #12
 282              	.LCFI8:
 283              		.cfi_def_cfa_offset 16
  19:Modules/src/uart4.c ****         __HAL_UART_CLEAR_IDLEFLAG(&huart4);
 284              		.loc 1 19 5 view .LVU57
  19:Modules/src/uart4.c ****         __HAL_UART_CLEAR_IDLEFLAG(&huart4);
 285              		.loc 1 19 9 is_stmt 0 view .LVU58
 286 0004 0A4B     		ldr	r3, .L18
 287 0006 1B68     		ldr	r3, [r3]
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s 			page 8


 288 0008 1A68     		ldr	r2, [r3]
  19:Modules/src/uart4.c ****         __HAL_UART_CLEAR_IDLEFLAG(&huart4);
 289              		.loc 1 19 8 view .LVU59
 290 000a 12F0100F 		tst	r2, #16
 291 000e 0BD0     		beq	.L15
  20:Modules/src/uart4.c ****         UartRxCheck();
 292              		.loc 1 20 9 is_stmt 1 view .LVU60
 293              	.LBB2:
  20:Modules/src/uart4.c ****         UartRxCheck();
 294              		.loc 1 20 9 view .LVU61
 295 0010 0022     		movs	r2, #0
 296 0012 0192     		str	r2, [sp, #4]
  20:Modules/src/uart4.c ****         UartRxCheck();
 297              		.loc 1 20 9 view .LVU62
 298 0014 1A68     		ldr	r2, [r3]
 299 0016 0192     		str	r2, [sp, #4]
  20:Modules/src/uart4.c ****         UartRxCheck();
 300              		.loc 1 20 9 view .LVU63
 301 0018 5B68     		ldr	r3, [r3, #4]
 302 001a 0193     		str	r3, [sp, #4]
  20:Modules/src/uart4.c ****         UartRxCheck();
 303              		.loc 1 20 9 view .LVU64
 304 001c 019B     		ldr	r3, [sp, #4]
 305              	.LBE2:
  20:Modules/src/uart4.c ****         UartRxCheck();
 306              		.loc 1 20 9 view .LVU65
  21:Modules/src/uart4.c ****     } else {
 307              		.loc 1 21 9 view .LVU66
 308 001e FFF7FEFF 		bl	UartRxCheck
 309              	.LVL9:
 310              	.L14:
  25:Modules/src/uart4.c **** 
 311              		.loc 1 25 1 is_stmt 0 view .LVU67
 312 0022 03B0     		add	sp, sp, #12
 313              	.LCFI9:
 314              		.cfi_remember_state
 315              		.cfi_def_cfa_offset 4
 316              		@ sp needed
 317 0024 5DF804FB 		ldr	pc, [sp], #4
 318              	.L15:
 319              	.LCFI10:
 320              		.cfi_restore_state
  23:Modules/src/uart4.c ****     }
 321              		.loc 1 23 9 is_stmt 1 view .LVU68
 322 0028 0148     		ldr	r0, .L18
 323 002a FFF7FEFF 		bl	HAL_UART_IRQHandler
 324              	.LVL10:
  25:Modules/src/uart4.c **** 
 325              		.loc 1 25 1 is_stmt 0 view .LVU69
 326 002e F8E7     		b	.L14
 327              	.L19:
 328              		.align	2
 329              	.L18:
 330 0030 00000000 		.word	huart4
 331              		.cfi_endproc
 332              	.LFE139:
 334              		.section	.text.DMA1_Stream2_IRQHandler,"ax",%progbits
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s 			page 9


 335              		.align	1
 336              		.global	DMA1_Stream2_IRQHandler
 337              		.syntax unified
 338              		.thumb
 339              		.thumb_func
 340              		.fpu fpv4-sp-d16
 342              	DMA1_Stream2_IRQHandler:
 343              	.LFB140:
  27:Modules/src/uart4.c ****     HAL_DMA_IRQHandler(huart4.hdmarx);
 344              		.loc 1 27 36 is_stmt 1 view -0
 345              		.cfi_startproc
 346              		@ args = 0, pretend = 0, frame = 0
 347              		@ frame_needed = 0, uses_anonymous_args = 0
 348 0000 08B5     		push	{r3, lr}
 349              	.LCFI11:
 350              		.cfi_def_cfa_offset 8
 351              		.cfi_offset 3, -8
 352              		.cfi_offset 14, -4
  28:Modules/src/uart4.c **** }
 353              		.loc 1 28 5 view .LVU71
 354 0002 024B     		ldr	r3, .L22
 355 0004 586B     		ldr	r0, [r3, #52]
 356 0006 FFF7FEFF 		bl	HAL_DMA_IRQHandler
 357              	.LVL11:
  29:Modules/src/uart4.c **** 
 358              		.loc 1 29 1 is_stmt 0 view .LVU72
 359 000a 08BD     		pop	{r3, pc}
 360              	.L23:
 361              		.align	2
 362              	.L22:
 363 000c 00000000 		.word	huart4
 364              		.cfi_endproc
 365              	.LFE140:
 367              		.section	.text.DMA1_Stream4_IRQHandler,"ax",%progbits
 368              		.align	1
 369              		.global	DMA1_Stream4_IRQHandler
 370              		.syntax unified
 371              		.thumb
 372              		.thumb_func
 373              		.fpu fpv4-sp-d16
 375              	DMA1_Stream4_IRQHandler:
 376              	.LFB141:
  31:Modules/src/uart4.c ****     HAL_DMA_IRQHandler(huart4.hdmatx);
 377              		.loc 1 31 36 is_stmt 1 view -0
 378              		.cfi_startproc
 379              		@ args = 0, pretend = 0, frame = 0
 380              		@ frame_needed = 0, uses_anonymous_args = 0
 381 0000 08B5     		push	{r3, lr}
 382              	.LCFI12:
 383              		.cfi_def_cfa_offset 8
 384              		.cfi_offset 3, -8
 385              		.cfi_offset 14, -4
  32:Modules/src/uart4.c **** }
 386              		.loc 1 32 5 view .LVU74
 387 0002 024B     		ldr	r3, .L26
 388 0004 186B     		ldr	r0, [r3, #48]
 389 0006 FFF7FEFF 		bl	HAL_DMA_IRQHandler
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s 			page 10


 390              	.LVL12:
  33:Modules/src/uart4.c **** 
 391              		.loc 1 33 1 is_stmt 0 view .LVU75
 392 000a 08BD     		pop	{r3, pc}
 393              	.L27:
 394              		.align	2
 395              	.L26:
 396 000c 00000000 		.word	huart4
 397              		.cfi_endproc
 398              	.LFE141:
 400              		.section	.text.HAL_UART_RxCpltCallback,"ax",%progbits
 401              		.align	1
 402              		.global	HAL_UART_RxCpltCallback
 403              		.syntax unified
 404              		.thumb
 405              		.thumb_func
 406              		.fpu fpv4-sp-d16
 408              	HAL_UART_RxCpltCallback:
 409              	.LVL13:
 410              	.LFB142:
  35:Modules/src/uart4.c ****     if (huart->Instance == UART4) {
 411              		.loc 1 35 57 is_stmt 1 view -0
 412              		.cfi_startproc
 413              		@ args = 0, pretend = 0, frame = 0
 414              		@ frame_needed = 0, uses_anonymous_args = 0
  35:Modules/src/uart4.c ****     if (huart->Instance == UART4) {
 415              		.loc 1 35 57 is_stmt 0 view .LVU77
 416 0000 08B5     		push	{r3, lr}
 417              	.LCFI13:
 418              		.cfi_def_cfa_offset 8
 419              		.cfi_offset 3, -8
 420              		.cfi_offset 14, -4
  36:Modules/src/uart4.c ****         UartRxCheck();
 421              		.loc 1 36 5 is_stmt 1 view .LVU78
  36:Modules/src/uart4.c ****         UartRxCheck();
 422              		.loc 1 36 14 is_stmt 0 view .LVU79
 423 0002 0268     		ldr	r2, [r0]
  36:Modules/src/uart4.c ****         UartRxCheck();
 424              		.loc 1 36 8 view .LVU80
 425 0004 034B     		ldr	r3, .L32
 426 0006 9A42     		cmp	r2, r3
 427 0008 00D0     		beq	.L31
 428              	.LVL14:
 429              	.L28:
  39:Modules/src/uart4.c **** 
 430              		.loc 1 39 1 view .LVU81
 431 000a 08BD     		pop	{r3, pc}
 432              	.LVL15:
 433              	.L31:
  37:Modules/src/uart4.c ****     }
 434              		.loc 1 37 9 is_stmt 1 view .LVU82
 435 000c FFF7FEFF 		bl	UartRxCheck
 436              	.LVL16:
  39:Modules/src/uart4.c **** 
 437              		.loc 1 39 1 is_stmt 0 view .LVU83
 438 0010 FBE7     		b	.L28
 439              	.L33:
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s 			page 11


 440 0012 00BF     		.align	2
 441              	.L32:
 442 0014 004C0040 		.word	1073761280
 443              		.cfi_endproc
 444              	.LFE142:
 446              		.section	.text.HAL_UART_RxHalfCpltCallback,"ax",%progbits
 447              		.align	1
 448              		.global	HAL_UART_RxHalfCpltCallback
 449              		.syntax unified
 450              		.thumb
 451              		.thumb_func
 452              		.fpu fpv4-sp-d16
 454              	HAL_UART_RxHalfCpltCallback:
 455              	.LVL17:
 456              	.LFB143:
  41:Modules/src/uart4.c ****     if (huart->Instance == UART4) {
 457              		.loc 1 41 61 is_stmt 1 view -0
 458              		.cfi_startproc
 459              		@ args = 0, pretend = 0, frame = 0
 460              		@ frame_needed = 0, uses_anonymous_args = 0
  41:Modules/src/uart4.c ****     if (huart->Instance == UART4) {
 461              		.loc 1 41 61 is_stmt 0 view .LVU85
 462 0000 08B5     		push	{r3, lr}
 463              	.LCFI14:
 464              		.cfi_def_cfa_offset 8
 465              		.cfi_offset 3, -8
 466              		.cfi_offset 14, -4
  42:Modules/src/uart4.c ****         UartRxCheck();
 467              		.loc 1 42 5 is_stmt 1 view .LVU86
  42:Modules/src/uart4.c ****         UartRxCheck();
 468              		.loc 1 42 14 is_stmt 0 view .LVU87
 469 0002 0268     		ldr	r2, [r0]
  42:Modules/src/uart4.c ****         UartRxCheck();
 470              		.loc 1 42 8 view .LVU88
 471 0004 034B     		ldr	r3, .L38
 472 0006 9A42     		cmp	r2, r3
 473 0008 00D0     		beq	.L37
 474              	.LVL18:
 475              	.L34:
  45:Modules/src/uart4.c **** 
 476              		.loc 1 45 1 view .LVU89
 477 000a 08BD     		pop	{r3, pc}
 478              	.LVL19:
 479              	.L37:
  43:Modules/src/uart4.c ****     }
 480              		.loc 1 43 9 is_stmt 1 view .LVU90
 481 000c FFF7FEFF 		bl	UartRxCheck
 482              	.LVL20:
  45:Modules/src/uart4.c **** 
 483              		.loc 1 45 1 is_stmt 0 view .LVU91
 484 0010 FBE7     		b	.L34
 485              	.L39:
 486 0012 00BF     		.align	2
 487              	.L38:
 488 0014 004C0040 		.word	1073761280
 489              		.cfi_endproc
 490              	.LFE143:
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s 			page 12


 492              		.comm	uart4_queue,4,4
 493              		.section	.bss.old_pos.9685,"aw",%nobits
 494              		.align	2
 495              		.set	.LANCHOR0,. + 0
 498              	old_pos.9685:
 499 0000 00000000 		.space	4
 500              		.section	.bss.osSys_uart4_queueMgm,"aw",%nobits
 501              		.align	2
 502              		.set	.LANCHOR2,. + 0
 505              	osSys_uart4_queueMgm:
 506 0000 00000000 		.space	72
 506      00000000 
 506      00000000 
 506      00000000 
 506      00000000 
 507              		.section	.bss.osSys_uart4_queueStorage,"aw",%nobits
 508              		.align	2
 509              		.set	.LANCHOR3,. + 0
 512              	osSys_uart4_queueStorage:
 513 0000 00000000 		.space	40
 513      00000000 
 513      00000000 
 513      00000000 
 513      00000000 
 514              		.section	.bss.rx_buffer,"aw",%nobits
 515              		.align	2
 516              		.set	.LANCHOR1,. + 0
 519              	rx_buffer:
 520 0000 00000000 		.space	128
 520      00000000 
 520      00000000 
 520      00000000 
 520      00000000 
 521              		.text
 522              	.Letext0:
 523              		.file 2 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\machine\\_default_ty
 524              		.file 3 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\_stdint.h"
 525              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 526              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 527              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 528              		.file 7 "e:\\gnu tools arm embedded\\9 2019-q4-major\\lib\\gcc\\arm-none-eabi\\9.2.1\\include\\std
 529              		.file 8 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 530              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 531              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 532              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 533              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 534              		.file 13 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\lock.h"
 535              		.file 14 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\_types.h"
 536              		.file 15 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\reent.h"
 537              		.file 16 "Modules/include/utils.h"
 538              		.file 17 "Inc/usart.h"
 539              		.file 18 "Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM4F/portmacro.h"
 540              		.file 19 "Middlewares/Third_Party/FreeRTOS/Source/include/FreeRTOS.h"
 541              		.file 20 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 542              		.file 21 "Modules/include/uart4.h"
 543              		.file 22 "e:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\stdio.h"
ARM GAS  C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s 			page 13


DEFINED SYMBOLS
                            *ABS*:00000000 uart4.c
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:18     .rodata.UartRxCheck.str1.4:00000000 $d
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:22     .text.UartRxCheck:00000000 $t
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:29     .text.UartRxCheck:00000000 UartRxCheck
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:183    .text.UartRxCheck:00000098 $d
                            *COM*:00000004 uart4_queue
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:193    .rodata.Uart4Init.str1.4:00000000 $d
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:197    .text.Uart4Init:00000000 $t
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:204    .text.Uart4Init:00000000 Uart4Init
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:254    .text.Uart4Init:00000038 $d
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:264    .text.UART4_IRQHandler:00000000 $t
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:271    .text.UART4_IRQHandler:00000000 UART4_IRQHandler
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:330    .text.UART4_IRQHandler:00000030 $d
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:335    .text.DMA1_Stream2_IRQHandler:00000000 $t
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:342    .text.DMA1_Stream2_IRQHandler:00000000 DMA1_Stream2_IRQHandler
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:363    .text.DMA1_Stream2_IRQHandler:0000000c $d
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:368    .text.DMA1_Stream4_IRQHandler:00000000 $t
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:375    .text.DMA1_Stream4_IRQHandler:00000000 DMA1_Stream4_IRQHandler
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:396    .text.DMA1_Stream4_IRQHandler:0000000c $d
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:401    .text.HAL_UART_RxCpltCallback:00000000 $t
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:408    .text.HAL_UART_RxCpltCallback:00000000 HAL_UART_RxCpltCallback
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:442    .text.HAL_UART_RxCpltCallback:00000014 $d
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:447    .text.HAL_UART_RxHalfCpltCallback:00000000 $t
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:454    .text.HAL_UART_RxHalfCpltCallback:00000000 HAL_UART_RxHalfCpltCallback
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:488    .text.HAL_UART_RxHalfCpltCallback:00000014 $d
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:494    .bss.old_pos.9685:00000000 $d
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:498    .bss.old_pos.9685:00000000 old_pos.9685
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:501    .bss.osSys_uart4_queueMgm:00000000 $d
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:505    .bss.osSys_uart4_queueMgm:00000000 osSys_uart4_queueMgm
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:508    .bss.osSys_uart4_queueStorage:00000000 $d
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:512    .bss.osSys_uart4_queueStorage:00000000 osSys_uart4_queueStorage
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:515    .bss.rx_buffer:00000000 $d
C:\Users\luoha\AppData\Local\Temp\cc9UswVK.s:519    .bss.rx_buffer:00000000 rx_buffer

UNDEFINED SYMBOLS
printf
xQueueGenericSendFromISR
huart4
xQueueGenericCreateStatic
HAL_UART_Receive_DMA
HAL_UART_IRQHandler
HAL_DMA_IRQHandler
